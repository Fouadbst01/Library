{% extends 'base.html.twig' %}

{% block title %}Livre index{% endblock %}

{% block body %}
    {# <h1>Livre index</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Isbn</th>
                <th>Titre</th>
                <th>Nombre_pages</th>
                <th>Date_de_parution</th>
                <th>Note</th>
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for livre in livres %}
            <tr>
                <td>{{ livre.id }}</td>
                <td>{{ livre.isbn }}</td>
                <td>{{ livre.titre }}</td>
                <td>{{ livre.nombrePages }}</td>
                <td>{{ livre.dateDeParution ? livre.dateDeParution|date('Y-m-d H:i:s') : '' }}</td>
                <td>{{ livre.note }}</td>
                <td>
                    <a href="{{ path('livre_show', {'id': livre.id}) }}">show</a>
                    <a href="{{ path('livre_edit', {'id': livre.id}) }}">edit</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="7">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('livre_new') }}">Create new</a> #}
    <section class="snew">
		<div class="new-container">
            <!-- Box -->
            {% for key,livre in livres %}
            <div class="box">
                <div class="box-img">
                    <img src="../images/b{{key%4+1}}.jpg" alt="">
                </div>
                <div class="title-price">
                    <h3>{{ livre.titre }}</h3>
                    <div class="stars">
                        {% set nb = livre.note %}
                        {% if (nb  / 5)%10 != 0 %}
                        {% for i in 1..(nb  / 5)%10 %}
                            <i class="bx bxs-star"></i>
                        {% endfor %}
                        {% endif %}
                        {% if ((nb / 5) - (nb / 5)%10)*10 >= 5 %}
                        <i class="bx bxs-star-half"></i>
                        {% else %}
                        <i class="bx bx-star"></i>
                        {% endif %}
                        {% if (4 - (nb / 5)%10) != 0 %}
                        {% for i in 1..((4 - (nb / 5)%10)) %}
                            <i class="bx bx-star"></i>
                        {% endfor %}
                        {% endif %}
                    </div>
                </div>
                <span>{{ livre.nombrePages }} pages</span><br>
                <span>{{ livre.dateDeParution ? livre.dateDeParution|date('Y-m-d') : '' }}</span>
                <i class='bx bx-right-arrow' ></i>
            </div>
            {% endfor %}
		</div>
	</section>
{% endblock %}
